/*
Deployment script for DBTier3

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "DBTier3"
:setvar DefaultFilePrefix "DBTier3"
:setvar DefaultDataPath "C:\Users\Tibor Fekete\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB"
:setvar DefaultLogPath "C:\Users\Tibor Fekete\AppData\Local\Microsoft\Microsoft SQL Server Local DB\Instances\MSSQLLocalDB"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Rename refactoring operation with key 5618d69a-0570-4c4c-a0f1-8d5b9b07fb7e is skipped, element [dbo].[AddressTable].[address] (SqlSimpleColumn) will not be renamed to Address';


GO
PRINT N'Rename refactoring operation with key 9f69f049-e50b-46f5-bd29-4d7eaf1af191 is skipped, element [dbo].[EventTable].[address] (SqlSimpleColumn) will not be renamed to Address';


GO
PRINT N'Rename refactoring operation with key 11769fb0-f1bf-4cb5-821f-8a251468e463 is skipped, element [dbo].[EventTable].[date] (SqlSimpleColumn) will not be renamed to Date';


GO
PRINT N'The following operation was generated from a refactoring log file eb735151-7164-4510-b611-cd3419a123be';

PRINT N'Rename [dbo].[Date].[date] to DateId';


GO
EXECUTE sp_rename @objname = N'[dbo].[Date].[date]', @newname = N'DateId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 8b8c20d1-57aa-4599-b772-f7742df3156d';

PRINT N'Rename [dbo].[AddressTable].[address] to AddressId';


GO
EXECUTE sp_rename @objname = N'[dbo].[AddressTable].[address]', @newname = N'AddressId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 0ae0fb99-8313-4255-8774-882dee86d08e';

PRINT N'Rename [dbo].[DrinkTable].[drink] to drinkId';


GO
EXECUTE sp_rename @objname = N'[dbo].[DrinkTable].[drink]', @newname = N'drinkId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 5501cce9-6537-4904-8c06-a8140bd2509e';

PRINT N'Rename [dbo].[EventTable].[address] to AddressId';


GO
EXECUTE sp_rename @objname = N'[dbo].[EventTable].[address]', @newname = N'AddressId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file aeec28e2-5e56-4ca3-92c6-316d187161fb';

PRINT N'Rename [dbo].[EventTable].[date] to DateId';


GO
EXECUTE sp_rename @objname = N'[dbo].[EventTable].[date]', @newname = N'DateId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 759b69c0-ddb0-4185-b132-f467bef3b8bf, 8e71f2cb-a4f2-40ea-a838-706fcd6ea7de';

PRINT N'Rename [dbo].[EventTable].[food] to foodId';


GO
EXECUTE sp_rename @objname = N'[dbo].[EventTable].[food]', @newname = N'foodId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file ccf9668d-7189-4251-b7a7-2360f6e6aee8';

PRINT N'Rename [dbo].[EventTable].[drink] to drinkId';


GO
EXECUTE sp_rename @objname = N'[dbo].[EventTable].[drink]', @newname = N'drinkId', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 4ea359b4-db20-42d3-97e4-5ec2da2c259b';

PRINT N'Rename [dbo].[EventTable].[description] to descriptions';


GO
EXECUTE sp_rename @objname = N'[dbo].[EventTable].[description]', @newname = N'descriptions', @objtype = N'COLUMN';


GO
-- Refactoring step to update target server with deployed transaction logs
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '5618d69a-0570-4c4c-a0f1-8d5b9b07fb7e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('5618d69a-0570-4c4c-a0f1-8d5b9b07fb7e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '9f69f049-e50b-46f5-bd29-4d7eaf1af191')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('9f69f049-e50b-46f5-bd29-4d7eaf1af191')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '11769fb0-f1bf-4cb5-821f-8a251468e463')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('11769fb0-f1bf-4cb5-821f-8a251468e463')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'eb735151-7164-4510-b611-cd3419a123be')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('eb735151-7164-4510-b611-cd3419a123be')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '8b8c20d1-57aa-4599-b772-f7742df3156d')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('8b8c20d1-57aa-4599-b772-f7742df3156d')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '0ae0fb99-8313-4255-8774-882dee86d08e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('0ae0fb99-8313-4255-8774-882dee86d08e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '5501cce9-6537-4904-8c06-a8140bd2509e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('5501cce9-6537-4904-8c06-a8140bd2509e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'aeec28e2-5e56-4ca3-92c6-316d187161fb')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('aeec28e2-5e56-4ca3-92c6-316d187161fb')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '759b69c0-ddb0-4185-b132-f467bef3b8bf')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('759b69c0-ddb0-4185-b132-f467bef3b8bf')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '8e71f2cb-a4f2-40ea-a838-706fcd6ea7de')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('8e71f2cb-a4f2-40ea-a838-706fcd6ea7de')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ccf9668d-7189-4251-b7a7-2360f6e6aee8')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ccf9668d-7189-4251-b7a7-2360f6e6aee8')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '4ea359b4-db20-42d3-97e4-5ec2da2c259b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('4ea359b4-db20-42d3-97e4-5ec2da2c259b')

GO

GO
PRINT N'Update complete.';


GO
